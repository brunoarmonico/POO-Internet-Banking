CREATE DATABASE BANCOHUE

GO
USE BANCOHUE

CREATE TABLE CLIENTE (
CPF CHAR (11) NOT NULL UNIQUE CHECK(LEN(CPF) = 11),
NOME VARCHAR (200) NOT NULL,
AGENCIA CHAR (4) NOT NULL,
CONTA VARCHAR (10) NOT NULL,
SALDO DECIMAL (10,2) NOT NULL,
PRIMARY KEY(CPF)
)

CREATE TABLE LOGIN(
LOGIN NVARCHAR (50) UNIQUE NOT NULL,
SENHA NVARCHAR (30) NOT NULL,
CPF CHAR (11) NOT NULL,
PRIMARY KEY (LOGIN),
FOREIGN KEY (CPF) REFERENCES CLIENTE (CPF)
)

select * from cliente
--DROP TABLE EXTRATO

CREATE TABLE EXTRATO  (
DATAOCORRENCIA DATE NOT NULL,
OCORRENCIA VARCHAR (100) NOT NULL,
DESCRICAO VARCHAR (200) NULL,
VALOR DECIMAL (10,2) NOT NULL,
AGENCIA CHAR (4) NOT NULL,
CONTA VARCHAR (10) NOT NULL,
CPF CHAR (11) NOT NULL,
FOREIGN KEY (CPF) REFERENCES CLIENTE (CPF)
)

INSERT INTO CLIENTE (CPF, NOME, AGENCIA, CONTA, SALDO) VALUES
('11111111111', 'FULANO DE TAL', 1122, '12345678', 2000.00),
('22222222222', 'BELTRANO DE TAL', 1122, '444444-X', 5000.00)

INSERT INTO LOGIN (LOGIN, SENHA, CPF) VALUES
('ABC123', '123', '11111111111'),
('abc222', '222', '22222222222')

INSERT INTO EXTRATO (DATAOCORRENCIA, OCORRENCIA, DESCRICAO, VALOR, AGENCIA, CONTA, CPF) VALUES
(GETDATE(), 'TRANSFERENCIA', 'novo teste de transferencia ', 3000.00, 1122, '12345678', '11111111111')
(GETDATE(), 'TRANSFERENCIA', 'TESTE DE TRANSFERENCIA', 300.00, 1122, '12345678', '11111111111'),
(GETDATE(), 'PAGAMENTO', 'TESTE DE pagamento', 50.00, 1122, '444444-X', '22222222222')

/*BUSCA USUARIO E SENHA*/

SELECT CONVERT(VARCHAR, CPF) AS CPF FROM LOGIN
WHERE LOGIN  = 'ABC123' AND SENHA = '123'

/*BUSCA DADOS POR CPF*/
SELECT * FROM CLIENTE
WHERE CPF = '11111111111'

/*ADICIONA USUARIOS*/

INSERT INTO CLIENTE( CPF, NOME, AGENCIA, CONTA, SALDO) VALUES

/*VER EXTRATO*/
SELECT * FROM EXTRATO
WHERE AGENCIA = 1122 AND CONTA = '12345678' AND CPF = '11111111111'

/*ATUALIZAR SALDO*/
UPDATE CLIENTE
SET SALDO = SALDO + 50
WHERE AGENCIA = 1122 AND CONTA = '12345678' AND CPF = '11111111111'

select * from extrato

select * from cliente

/*PEGAR EXTRATO*/
SELECT * FROM EXTRATO
WHERE CPF = '11111111111'

/*PAGAMENTO*/
UPDATE CLIENTE
SET SALDO = 

INSERT INTO EXTRATO (DATAOCORRENCIA, OCORRENCIA, DESCRICAO, VALOR, AGENCIA, CONTA, CPF) VALUES
